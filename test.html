<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator App with Memory and History</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        nav {
            margin-bottom: 20px;
        }
        nav a {
            margin-right: 10px;
        }
        .calculator {
            display: none;
        }
        .active {
            display: block;
        }
        input, select, button {
            margin: 5px;
            padding: 5px;
        }
        #normalCalculator button {
            width: 50px;
        }
        #memoryDisplay {
            font-size: 0.8em;
            color: #666;
            margin-top: 5px;
        }
        #historyContainer {
            margin-top: 20px;
            border: 1px solid #ccc;
            padding: 10px;
            max-height: 200px;
            overflow-y: auto;
        }
        .historyItem {
            cursor: pointer;
            padding: 5px;
            border-bottom: 1px solid #eee;
        }
        .historyItem:hover {
            background-color: #f0f0f0;
        }
    </style>
</head>
<body>
    <nav>
        <a href="#" onclick="showCalculator('graphing')">Graphing Calculator</a>
        <a href="#" onclick="showCalculator('conversion')">Conversion Calculator</a>
        <a href="#" onclick="showCalculator('normal')">Normal Calculator</a>
    </nav>

    <!-- Graphing Calculator and Conversion Calculator sections remain unchanged -->

    <div id="normalCalculator" class="calculator">
        <h2>Normal Calculator</h2>
        <input type="text" id="display" readonly>
        <div id="memoryDisplay">Memory: 0</div>
        <br>
        <button onclick="appendToDisplay('7')">7</button>
        <button onclick="appendToDisplay('8')">8</button>
        <button onclick="appendToDisplay('9')">9</button>
        <button onclick="appendToDisplay('/')">/</button>
        <button onclick="memoryStore()">MS</button>
        <br>
        <button onclick="appendToDisplay('4')">4</button>
        <button onclick="appendToDisplay('5')">5</button>
        <button onclick="appendToDisplay('6')">6</button>
        <button onclick="appendToDisplay('*')">*</button>
        <button onclick="memoryRecall()">MR</button>
        <br>
        <button onclick="appendToDisplay('1')">1</button>
        <button onclick="appendToDisplay('2')">2</button>
        <button onclick="appendToDisplay('3')">3</button>
        <button onclick="appendToDisplay('-')">-</button>
        <button onclick="memoryAdd()">M+</button>
        <br>
        <button onclick="appendToDisplay('0')">0</button>
        <button onclick="appendToDisplay('.')">.</button>
        <button onclick="calculate()">=</button>
        <button onclick="appendToDisplay('+')">+</button>
        <button onclick="memorySubtract()">M-</button>
        <br>
        <button onclick="clearDisplay()">C</button>
        <button onclick="memoryClear()">MC</button>

        <div id="historyContainer">
            <h3>Calculation History</h3>
            <div id="historyList"></div>
        </div>
    </div>

    <script>
        let currentCalculator = 'graphing';
        let chart;
        let memory = 0;
        let history = [];

        function showCalculator(calculatorType) {
            document.getElementById(currentCalculator + 'Calculator').classList.remove('active');
            document.getElementById(calculatorType + 'Calculator').classList.add('active');
            currentCalculator = calculatorType;
        }

        // Graphing Calculator and Conversion Calculator functions remain unchanged

        function appendToDisplay(value) {
            document.getElementById('display').value += value;
        }

        function clearDisplay() {
            document.getElementById('display').value = '';
        }

        function calculate() {
            try {
                const expression = document.getElementById('display').value;
                const result = eval(expression);
                document.getElementById('display').value = result;
                addToHistory(expression, result);
            } catch (error) {
                document.getElementById('display').value = 'Error';
            }
        }

        function updateMemoryDisplay() {
            document.getElementById('memoryDisplay').textContent = `Memory: ${memory}`;
        }

        function memoryStore() {
            memory = parseFloat(document.getElementById('display').value) || 0;
            updateMemoryDisplay();
        }

        function memoryRecall() {
            document.getElementById('display').value = memory;
        }

        function memoryAdd() {
            memory += parseFloat(document.getElementById('display').value) || 0;
            updateMemoryDisplay();
        }

        function memorySubtract() {
            memory -= parseFloat(document.getElementById('display').value) || 0;
            updateMemoryDisplay();
        }

        function memoryClear() {
            memory = 0;
            updateMemoryDisplay();
        }

        function addToHistory(expression, result) {
            history.unshift({ expression, result });
            if (history.length > 10) {
                history.pop();
            }
            updateHistoryDisplay();
        }

        function updateHistoryDisplay() {
            const historyList = document.getElementById('historyList');
            historyList.innerHTML = '';
            history.forEach((item, index) => {
                const historyItem = document.createElement('div');
                historyItem.classList.add('historyItem');
                historyItem.textContent = `${item.expression} = ${item.result}`;
                historyItem.onclick = () => recallHistory(index);
                historyList.appendChild(historyItem);
            });
        }

        function recallHistory(index) {
            document.getElementById('display').value = history[index].result;
        }

        // Show the graphing calculator by default
        showCalculator('graphing');
    </script>
</body>
</html>
